---
date: "2020-08-07"
slug: k8s-on-r9i
tag:
  - Kubernetes
  - Raspberry Pi
  - Arch Linux
author: nasum
lang: ja
title: Raspberry Pi ä¸Šã« Kubernetes ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹
emoji: "ğŸ†"
topics: ["Kubernetes", "Raspberry Pi", "Arch Linux"]
type: tech
published: true
---

# Raspberry Pi ä¸Šã« Kubernetes ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹

è‡ªåˆ†ã®æ‰€å±ã—ã¦ã„ã‚‹ä¼šç¤¾ã€[LAPRAS](https://lapras.com)ã§å¤ã®è‡ªç”±ç ”ç©¶ãƒªãƒ¬ãƒ¼ã‚’è¡Œã£ã¦ã„ã‚‹ã®ã§ä»Šå›ã¯ãã‚Œã«ä¾¿ä¹—ã—ã¦æœ€è¿‘ã‚„ã£ã¦ã‚‹ãƒã‚¿ã‚’æ›¸ã„ã¦ã¿ã¾ã™ã€‚

å¤šãã®äººãŒã‚‚ã†ã™ã§ã«ã‚„ã£ã¦ã„ã‚‹ãƒã‚¿ã§ã¯ã‚ã‚‹ã®ã§ã™ãŒã€Raspberry Pi ä¸Šã« Kubernetes ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã—ã¦ã¿ã¾ã—ãŸã€‚å¤§æŠµã®äººã¯ Raspbianï¼ˆç¾ Raspberry Pi OSï¼‰ã‚’ä½¿ã£ã¦æ§‹ç¯‰ã—ã¦ã„ã‚‹ã¿ãŸã„ã§ã—ãŸãŒã€è‡ªåˆ†ã¯ã‚ã‚“ã¾ã‚Šã‚„ã£ã¦ã‚‹äººã‚’è¦‹ã‹ã‘ãªã‹ã£ãŸ Arch Linux ã§ã®æ§‹ç¯‰ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¾ã—ãŸã€‚

## ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®æº–å‚™

ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã¯ä»¥ä¸‹ã®ã‚‚ã®ã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚

| åç§°                     | å˜ä¾¡ | å€‹æ•° |
| :----------------------- | ---: | ---: |
| Raspberry Pi 4 4GB       | 6100 |    3 |
| Anker PowerPort Speed 4  | 2999 |    1 |
| Buffalo LSW6-GT-5EPL/NBK | 1280 |    1 |
| ç©å±¤ã‚±ãƒ¼ã‚¹               | 2759 |    1 |
| USB Type-C ã‚±ãƒ¼ãƒ–ãƒ«      |  699 |    3 |
| LAN ã‚±ãƒ¼ãƒ–ãƒ«             |  781 |    3 |
| Micro SD ã‚«ãƒ¼ãƒ‰ 32GB     | 1080 |    3 |

å¤§ä½“ 3 ä¸‡å††è¶Šãˆã‚‹ãã‚‰ã„ã«ãªã‚Šã¾ã—ãŸã€‚

## ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚’çµ„ã¿ç«‹ã¦ã‚‹

ã¾ãšã¯ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®æº–å‚™ã‚’ã—ã¾ã™ã€‚

ç©å±¤ã‚±ãƒ¼ã‚¹ã‚’è³¼å…¥ã—ãŸã®ã§ä¸€ã¤ãšã¤ Raspberry Pi ã‚’å›ºå®šã—ã¦ãƒ’ãƒ¼ãƒˆã‚·ãƒ³ã‚¯ã‚’æ¥ç€ã—ã€ã‚±ãƒ¼ã‚¹ã«ãƒ•ã‚¡ãƒ³ã‚’å–ã‚Šä»˜ã‘ã¦ã„ãã¾ã™ã€‚

![Raspberry Piã‚’ä¸€ã¤å›ºå®š](https://i.imgur.com/MdnfKFa.jpg)

ãƒã‚¸æ­¢ã‚ãªã©æ„å¤–ã¨æ ¹æ°—ãŒã„ã‚‹ã®ã§ãã‚Œãªã‚Šã«ä½™è£•ã‚’æŒã£ã¦ä½œæ¥­ã™ã‚‹ã¨è‰¯ã„ã§ã™ã€‚

![Raspberry Piã‚’å›ºå®šã—çµ‚ãˆã‚‹](https://i.imgur.com/G64ErUF.jpg)

å…¨éƒ¨è¨­ç½®ã§ãã‚‹ã¨è¦‹ãŸç›®ãŒã‹ã£ã“ã„ã„ä½•ã‹ãŒã§ãã¾ã™ã€‚æ­£ç›´ã“ã‚Œã ã‘ã§ã‚‚æº€è¶³åº¦ãŒé«˜ã„ã§ã™ã€‚

![Raspberry Piã‚¯ãƒ©ã‚¹ã‚¿ã®æœ€çµ‚å½¢æ…‹](https://i.imgur.com/TP6Wqxx.jpg)

## Raspberry Pi ã« ArchiLinux ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

Micro SD ã« ArchiLinux ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãã¾ã™ã€‚

ã ã„ãŸã„[å…¬å¼ã®ãƒšãƒ¼ã‚¸](https://archlinuxarm.org/platforms/armv8/broadcom/raspberry-pi-4)ã«ã‚„ã‚Šæ–¹ã¯è¼‰ã£ã¦ã„ã¾ã™ã—ã€éå»åˆ¥ã®[ãƒ–ãƒ­ã‚°ã§æ›¸ã„ãŸ](https://www.chirashiura.com/entry/2019/12/15/005240)ã®ã§ã™ãŒã€ã‚ã‚‰ãŸã‚ã¦ç°¡å˜ã«æ‰‹é †ã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚

1. fdisk ã§ SD ã‚«ãƒ¼ãƒ‰ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’åˆ‡ã‚‹
   - boot ç”¨ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã¨ root ç”¨ã®ãƒ‘ãƒ¼ãƒ†ã‚¤ã‚·ãƒ§ãƒ³ã‚’ç”¨æ„ã—ã¾ã™
2. mkfs ã§ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ã™ã‚‹
   - boot ç”¨ã®ãƒ‘ãƒ¼ãƒ†ã‚¤ã‚·ãƒ§ãƒ³ã‚’ VFAT ï½ root ç”¨ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ ext4 ã«ã—ã¾ã™
3. boot ã¨ root 2 ã¤ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ãã‚Œãã‚Œãƒã‚¦ãƒ³ãƒˆã™ã‚‹
4. `wget http://os.archlinuxarm.org/os/ArchLinuxARM-rpi-4-latest.tar.gz` ã§æœ€æ–°ã® ArchLinux ã‚’å–å¾—ã™ã‚‹
5. `bsdtar -xpf ArchLinuxARM-rpi-4-latest.tar.gz -C root` ã§ root ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—æœ€å¾Œã« `sync` ã‚’å®Ÿè¡Œã™ã‚‹
6. `mv root/boot/* boot` ã§ boot ã®ä¸­èº«ã‚’ boot ç”¨ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹

ã“ã‚Œã§ SD ã‚«ãƒ¼ãƒ‰ã¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯å®Œäº†ã§ã™ã€‚Raspberry Pi ã¯ 3 å°ã‚ã‚‹ã®ã§ 3 å°åˆ†ç¹°ã‚Šè¿”ã—ã¾ã™ã€‚

ã“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä½œæ¥­æ™‚ã«äºˆã‚å…¬é–‹éµã‚’ã‚³ãƒ”ãƒ¼ã—ã¦é…ç½®ã—ã¦ãŠãã¨ã‚ã¨ã¯ä½œæ¥­ç«¯æœ«ã‹ã‚‰ ssh ã§æ¥ç¶šã—ã¦ä½œæ¥­ã§ãã‚‹ã®ã§æ¥½ã§ã™ã€‚

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒçµ‚ã‚ã£ãŸ MicroSD ã¯ãã‚Œãã‚Œ Raspberry Pi ã«åˆºã—ã¦é›»æºã‚’å…¥ã‚Œã¦ãŠãã¾ã™ã€‚

## ArchLinux ã« Kubernetes ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æº–å‚™ã‚’ã™ã‚‹

OS ã®æº–å‚™ãŒã§ããŸã®ã§ Kubernetes ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æº–å‚™ã‚’ã—ã¾ã™ã€‚

ã¾ãš IP ã‚’å›ºå®šã—ãŸã„ã®ã§ã™ãŒè‚å¿ƒã® RaspberryPi ã® IP ãŒã‚ã‹ã‚‰ãªã„ã®ã§ ssh ã§æ¥ç¶šã§ãã¾ã›ã‚“ã€‚

ã“ã®ã¨ãã¯ nmap ã‚’ä½¿ç”¨ã—ã¦å¼·å¼•ã«ç‰¹å®šã—ã¾ã—ãŸã€‚

```cmd
$ sudo nmap -sP 192.168.1.0/24
...
Nmap scan report for 192.168.1.2
Host is up (0.00021s latency).
MAC Address: CC:CC:CC:CC:CC:CC (Raspberry Pi Trading)
Nmap scan report for 192.168.1.3
Host is up (0.00023s latency).
MAC Address: BB:BB:BB:BB:BB:BB (Raspberry Pi Trading)
Nmap scan report for 192.168.1.4
Host is up (0.00019s latency).
MAC Address: AA:AA:AA:AA:AA:AA (Raspberry Pi Trading)
...
```

MAC Address ã®è¡Œã« Raspberry Pi Trading ã¨æ›¸ã„ã¦ã‚¢ãƒ¬ã° Raspberry Pi ãªã®ã§ãã“ã§ IP ã‚’ç‰¹å®šã— ssh æ¥ç¶šã—ä½œæ¥­ã‚’é–‹å§‹ã—ã¾ã™ã€‚

ã¾ãšã¯ IP ã®å›ºå®šã‚’è¡Œã„ã¾ã™ã€‚ `/etc/systemd/network/eth0.network` ã‚’æ¬¡ã®ã‚ˆã†ã«ç·¨é›†ã— IP ã‚’å›ºå®šã—ã¾ã™ã€‚

```
[Match]
Name=eth0

[Network]
Address=192.168.1.1/24
Gateway=192.168.1.2
DNS=8.8.8.8
```

ã“ã‚Œã‚’ 3 å°åˆ†ç¹°ã‚Šè¿”ã—å›ºå®šã—ã¾ã™ã€‚

æ¬¡ã« ArchLinux ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ« pacman ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã— pacman ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```cmd
$ pacman-key --init
$ pacman-key --populate archlinuxarm
```

ã“ã‚Œã‚’ 3 å°åˆ†ç¹°ã‚Šè¿”ã—ã¾ã™ã€‚

æ¬¡ã« cgroup ã‚„ docker ãªã©ã¯ AUR ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ AUR ãƒ˜ãƒ«ãƒ‘ãƒ¼ã® yay ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```cmd
$ git clone https://aur.archlinux.org/yay.git
$ cd yay
$ makepkg -si
```

ã“ã‚Œã‚’ 3 å°åˆ†ç¹°ã‚Šè¿”ã—ã¾ã™ã€‚

yay ã‚’ä½¿ç”¨ã— cgroup ã¨ docker ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚

```
$ yay -Sy cgroup docker
$ sudo systemctl enable docker.service
$ sudo systemctl enable cgconfig.service
```

cgroup ã¯èµ·å‹•ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã«ãªã‚‹ã®ã§ `/boot/cmdline.txt` ã«æ¬¡ã®è¨­å®šã‚’è¿½è¨˜ã—ã¾ã™ã€‚

```
cgroup_enable=cpuset cgroup_memory=memoryã€€cgroup_memory=1
```

ã“ã‚Œã‚’ 3 å°ï¼ˆä»¥ä¸‹ç•¥

æ¬¡ã« yay ã‚’ä½¿ç”¨ã— kubernetes ãŒåˆ©ç”¨ã™ã‚‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é–¢é€£ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```
$ yay -S ethtool ebtables socat conntrack-tools
```

ã“ã‚Œã‚’ 3ï¼ˆä»¥ä¸‹ç•¥

ã“ã‚Œã§ Kubernetes ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æº–å‚™ãŒæ•´ã„ã¾ã—ãŸã€‚Raspberry Pi ã®å°æ•°åˆ†ä½œæ¥­ãŒç¹°ã‚Šè¿”ã—ã«ãªã‚‹ã®ã§ Ansible ãªã©ã‚’ä½¿ã£ã¦è‡ªå‹•åŒ–ã—ãŸã»ã†ãŒè‰¯ã•ãã†ã§ã™ã€‚

## Kubernetes ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã„ã‚ˆã„ã‚ˆ Kubernetes ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ã™ã€‚é€šå¸¸ã¯ yay ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ãŒè‰¯ã„ã®ã§ã™ãŒã€è‡ªåˆ†ã®å ´åˆ yay ã ã¨ã†ã¾ãã„ãã¾ã›ã‚“ã§ã—ãŸã€‚ãªã®ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‰ãªã„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ã¾ã™ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã® URL ã§ CPU ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æ–‡å­—åˆ—ã‚’ arm ã«ã™ã‚‹ã®ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚

ã¾ãšã¯ CNI Plugins ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```cmd
$ CNI_VERSION="v0.8.2"
$ sudo mkdir -p /opt/cni/bin
$ curl -L "https://github.com/containernetworking/plugins/releases/download/${CNI_VERSION}/cni-plugins-linux-arm-${CNI_VERSION}.tgz" | sudo tar -C /opt/cni/bin -xz
```

æ¬¡ã« kubeadm kubelet kubectl ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```cmd
$ DOWNLOAD_DIR=/usr/local/bin
$ sudo mkdir -p $DOWNLOAD_DIR
$ RELEASE="$(curl -sSL https://dl.k8s.io/release/stable.txt)"
$ cd $DOWNLOAD_DIR
$ sudo curl -L --remote-name-all https://storage.googleapis.com/kubernetes-release/release/${RELEASE}/bin/linux/arm/{kubeadm,kubelet,kubectl}
$ sudo chmod +x {kubeadm,kubelet,kubectl}

$ RELEASE_VERSION="v0.2.7"
$ curl -sSL "https://raw.githubusercontent.com/kubernetes/release/${RELEASE_VERSION}/cmd/kubepkg/templates/latest/deb/kubelet/lib/systemd/system/kubelet.service" | sed "s:/usr/bin:${DOWNLOAD_DIR}:g" | sudo tee /etc/systemd/system/kubelet.service
$ sudo mkdir -p /etc/systemd/system/kubelet.service.d
$ curl -sSL "https://raw.githubusercontent.com/kubernetes/release/${RELEASE_VERSION}/cmd/kubepkg/templates/latest/deb/kubeadm/10-kubeadm.conf" | sed "s:/usr/bin:${DOWNLOAD_DIR}:g" | sudo tee /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
```

ã“ã‚Œã§ Kubernetes é–¢é€£ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯å®Œäº†ã§ã™ã€‚

## Kubeadm ã§ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹

ã“ã“ã¾ã§ããŸã‚‰ã‚³ãƒãƒ³ãƒ‰ã¯å•é¡Œãªãå®Ÿè¡Œã§ãã¾ã™ã€‚kubeadm ã‚’ä½¿ã£ã¦ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã—ã¦ã„ãã¾ã™ã€‚

æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ master node ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚

```cmd
$ sudo kubeadm init --pod-network-cidr=10.244.0.0/16

...

Your Kubernetes master has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

You should now deploy a pod network to the cluster.
Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

You can now join any number of machines by running the following on each node
as root:

  kubeadm join 192.168.1.2:6443 --token xx --discovery-token-ca-cert-hash sha256:xx

$ mkdir -p $HOME/.kube
$ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
$ sudo chown $(id -u):$(id -g) $HOME/.kube/config
```

master node ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒã“ã‚Œã§å®Œäº†ã—ã¾ã™ã€‚

æ¬¡ã«ãƒ¯ãƒ¼ã‚«ãƒ¼ node ã‚’æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ç™»éŒ²ã—ã¦ã„ãã¾ã™ã€‚

```cmd
$ kubeadm join 192.168.1.2:6443 --token xx --discovery-token-ca-cert-hash sha256:xx
```

ä»Šå›ã¯ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒãƒ¼ãƒ‰ãŒï¼’ã¤ãªã®ã§ï¼’å›ç¹°ã‚Šè¿”ã—ã¾ã™ã€‚

ã“ã®çŠ¶æ…‹ã§ master ãƒãƒ¼ãƒ‰ã§ kubectl ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚

```cmd
$ kubectl get nodes
NAME            STATUS      ROLES    AGE     VERSION
k8s-master-01   NotReady    master   13m     v1.18.5
k8s-node-01     NotReady    <none>   2m15s   v1.18.5
k8s-node-02     NotReady    <none>   100s    v1.18.5
```

ã„ã£ãŸã‚“ã™ã¹ã¦ã®ãƒãƒ¼ãƒ‰ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãŸã ã“ã®çŠ¶æ…‹ã ã¨ã¾ã  NotReady ã§æ­£ã—ãæ§‹ç¯‰ã§ãã¦ã„ã¾ã›ã‚“ã€‚kube-dns ãŒã¾ã å‹•ã„ã¦ã„ãªã„ã®ãŒåŸå› ã§ã™ã€‚kube-dns ã‚’æ­£ã—ãå‹•ã‹ã™ãŸã‚ã«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚

## flannel ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Kubernetes ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å‘¨ã‚Šã§ä»Šå›ã¯ flannel ã‚’ä½¿ã„ã¾ã™ã€‚flannel ã¯æ™®é€šã« kubectl ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã„ã¾ã™ã€‚

```
$ kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
```

ã“ã‚Œã§å•é¡Œãªã‘ã‚Œã°ã€kube-dns ãŒæ­£ã—ãå‹•ãå„ node ãŒ Ready ã«ãªã‚Šã¾ã™

```cmd
$ kubectl get nodes
NAME            STATUS   ROLES    AGE     VERSION
k8s-master-01   Ready    master   13m     v1.18.5
k8s-node-01     Ready    <none>   2m15s   v1.18.5
k8s-node-02     Ready    <none>   100s    v1.18.5
```

ã“ã‚Œã§ Kubernetes ã®ç’°å¢ƒãŒæ•´ã„ã¾ã—ãŸã€‚ã‚ã¨ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œã£ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚Šã™ã‚‹ã ã‘ã§ã™ã€‚

## ã¾ã¨ã‚

ã–ã£ã¨ Raspberry Pi ã§ Kubernetes ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œæˆã™ã‚‹æ‰‹é †ã‚’æ›¸ã„ã¦ã„ãã¾ã—ãŸã€‚ã¡ã‚‡ã£ã¨ã„ã‚ã„ã‚ç«¯æŠ˜ã£ãŸã‚Šã¾ã¨ã‚æ–¹ãŒæ‹™ã„ã®ã§ãã®ã†ã¡ãƒªãƒ©ã‚¤ãƒˆã™ã‚‹äºˆå®šã§ã™ã€‚

ã¨ã‚Šã‚ãˆãšæœ€å¾Œã«è¨€ã„ãŸã„ã“ã¨ã¨ã—ã¦ã¯ã€Raspberry Pi ã§ Kubernetes ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹ã®ã¯æ¥½ã—ã„ã®ã§æš‡ã¨ãŠé‡‘ãŒã‚ã‚‹æ–¹ã¯ãœã²è©¦ã—ã¦ã»ã—ã„ã§ã™ã€‚

## å‚è€ƒè³‡æ–™

- [Raspberry Pi ã§ãŠã†ã¡ Kubernetes æ§‹ç¯‰ã€è«–ç†ç·¨ã€‘](https://qiita.com/go_vargo/items/29f6d832ea0a289b4778)
- [kubeadm ã§ kubernetes v1.8 + Flannel ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://qiita.com/hichihara/items/79ef6613026f8c13eb99)
- [Arch Linux ã« kubeadm ã§é–‹ç™ºç”¨ Kubernetes ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã—ã¦ã¿ã‚‹](https://qiita.com/Aruneko/items/89b97aae755cc098f4c0)
